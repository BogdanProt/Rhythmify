@model Rhythmify.Models.Post
@using Microsoft.AspNetCore.Identity
@inject UserManager<User> UserManager

<div class="d-flex justify-content-center">
    <a class="btn btn-outline-success" href="/Posts/Index/">Afisare postari</a>
    <a class="btn btn-outline-success" href="/Posts/New">Adauga postare</a>
</div>

<br />

@Html.Partial("PostInfo", Model)

<hr />

@if (await UserManager.GetUserIdAsync(UserManager.GetUserAsync(User).Result) == Model.UserId)
{
    <div class="d-flex flex-row justify-content-between">
        <a class="btn btn-success" href="/Posts/Edit/@Model.Id">Editeaza postare</a>

        <form method="post" action="/Posts/Delete/@Model.Id">
            <button class="btn btn-danger" type="submit">Sterge postare</button>
        </form>
    </div>
}

<br />
<br />

<!-- Buton de like și afișare număr de like-uri -->
<form method="post" action="/Posts/Like">
    <input type="hidden" name="postId" value="@Model.Id" />
    <button type="submit" class="btn btn-primary">Like</button> @ViewBag.Likes like-uri
</form>

<hr />

<!-- Afișare comentarii -->
<h4>Comentarii:</h4>
@foreach (var comment in Model.Comments)
{
    <div class="comment">
        <p><strong>@comment.User.UserName:</strong> @comment.Content</p>
        <small>@comment.Timestamp</small>
    </div>
}

<hr />

<!-- Formular pentru adăugare comentariu -->
<form method="post" action="/Posts/AddComment">
    <input type="hidden" name="postId" value="@Model.Id" />
    <div class="form-group">
        <label for="content">Adaugă un comentariu:</label>
        <textarea class="form-control" name="content" id="content" rows="3"></textarea>
    </div>
    <button type="submit" class="btn btn-success">Adaugă comentariul</button>
</form>
